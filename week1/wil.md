## DB 스터디 1주차

### 스토리지 엔진

DB는 모듈식 시스템(전송 계층, 쿼리 프로세서, 실행 엔진, 스토리지 엔진)으로 구성됨

스토리지 엔진: DBMS에서 데이터를 메모리&디스크에 저장, 검색, 관리하며 각 노드에 데이터를 영구 저장함 

DB를 비교할 변수: 스키마 & 레코드 크기, 클라이언트 수, 쿼리 형식과 접근 패턴, 읽기와 쓰기 쿼리 비율 

### DBMS 구조

DB 인스턴스(노드)인 서버와 애플리케이션 인스턴스인 클라이언트 구조를 기반으로 함

1. 트랜스 포트(클러스터 통신, 클라이언트 통신)
2. 쿼리 프로세서(쿼리 파서, 쿼리 옵티마이저)
3. 실행 엔진 (원격 실행, 로컬 실행)
4. 스토리지 엔진( 트랜잭션 매니저, 잠금 매니저, 액세스 메소드, 버퍼 매니저, 복구 매니저)

클라이언트의 요청은 트랜스포트 서브 시스템을 통해 전달됨. 요청은 쿼리 형태

→ 트랜스포트 서브시스템은 쿼리를 쿼리 프로세스에 전달함 (해석, 분석, 검증 역할)

→ 분석된 쿼리는 쿼리 옵티마이저에 전달되어 내부 데이터 통계(index 카디널리티, 교집합 크기)와 데이터 위치(cluster 내 데이터 저장 위치 & 전송 비용)를 기반으로 쿼리 실행 계획 생성

→ 도출된 계획은 실행 엔진이 수행함

- 트랜잭션 매니저: 트랜잭션 스케줄 & DB의 상태의 논리적 일관성 보장
- 잠금 매너저: 트랜잭션에서 접근하는 DB 객체에 대한 잠금 제어
- 엑세스 메소드: 디스크에 저장된 데이터에 대한 접근 & 저장 방식 정의
- 버퍼 매니저: 데이터 페이지를 메모리에 캐시
- 복구 매니저: 로그를 유지 관리, 장애 발생 시 시스템 복구

### 인메모리 DBMS vs 디스크 기반 DBMS

1. 인메모리: 메모리(RAM)에 데이터 저장, 디스크는 복구 & 로그 저장 용도, 포인터를 사용해 디스크보다 빠른 데이터 접근하며 프로그래밍적으로 더 간단함 → OS의 메모리 추상화
    
    단점: RAM의 휘발성, 높은 가격
    
2. 디스크: 디스크에 데이터 저장, 메모리는 캐시 & 임시 저장 용도, 데이터 참조 & 직렬화 포맷 설정 등등 이슈를 모두 직접 관리함
    
    디스크 접근에 특화된 자료구조를 사용함
    
- 인메모리 DB의 지속성

: 시스템 시작과 복구 시 모든 로그를 재수행하지 않기 위해 백업본을 유지함 

→ 디스크 기반 자료 구조에 순서대로 저장함, 수정 내용은 비동기적으로 갱신, 배치 단위로 백업하여 I/O 작업을 최소화함.